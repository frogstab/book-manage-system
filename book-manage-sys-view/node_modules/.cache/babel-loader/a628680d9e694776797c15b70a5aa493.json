{"remainingRequest":"C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\src\\views\\admin\\BookManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\src\\views\\admin\\BookManage.vue","mtime":1741784366000},{"path":"C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766110578965},{"path":"C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1766110581748},{"path":"C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766110578965},{"path":"C:\\Users\\chen0\\Desktop\\book-manage-system\\source code\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1766110582465}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogewogICAgICAgIG51bTogMQogICAgICB9LAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgY292ZXI6IG51bGwsCiAgICAgIHBhZ2VTaXplOiAxMiwKICAgICAgdG90YWxJdGVtczogMCwKICAgICAgZGlhbG9nT3BlcmF0aW9uOiBmYWxzZSwKICAgICAgLy8g5byA5YWzCiAgICAgIGlzT3BlcmF0aW9uOiBmYWxzZSwKICAgICAgLy8g5byA5YWzLeagh+ivhuaWsOWinuaIluS/ruaUuQogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBkZWxlY3RlZFJvd3M6IFtdLAogICAgICBib29rUXVlcnlEdG86IHt9LAogICAgICAvLyDmkJzntKLmnaHku7YKICAgICAgb3B0aW9uczogW10sCiAgICAgIGJvb2tzaGVsZk9wdGlvbnM6IFtdLAogICAgICBzZWFyY2hUaW1lOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoRnJlc2hEYXRhKCk7CiAgICB0aGlzLmZldGNoQ2F0ZWdvcnkoKTsKICAgIHRoaXMuZmV0Y2hCb29rc2hlbGYoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbm5lbCgpIHsKICAgICAgdGhpcy5kaWFsb2dPcGVyYXRpb24gPSBmYWxzZTsKICAgICAgdGhpcy5pc09wZXJhdGlvbiA9IGZhbHNlOwogICAgICB0aGlzLmNvdmVyID0gJyc7CiAgICAgIHRoaXMuZGF0YSA9IHt9OwogICAgfSwKICAgIGJvb2tzaGVsZkNvbmZpZyhpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmZsb29yICsgIi0iICsgaXRlbS5hcmVhICsgIi0iICsgaXRlbS5mcmFtZTsKICAgIH0sCiAgICBoYW5kbGVCb29rQ292ZXJTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICBpZiAocmVzLmNvZGUgIT09IDIwMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOS5puexjeWwgemdouS4iuS8oOW8guW4uGApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoYOS5puexjeWwgemdouS4iuS8oOaIkOWKn2ApOwogICAgICB0aGlzLmNvdmVyID0gcmVzLmRhdGE7CiAgICB9LAogICAgZmV0Y2hCb29rc2hlbGYoKSB7CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJ2Jvb2tzaGVsZi9xdWVyeScsIHt9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5ib29rc2hlbGZPcHRpb25zID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoQ2F0ZWdvcnkoKSB7CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJ2NhdGVnb3J5L3F1ZXJ5Jywge30pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5LitCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuZGVsZWN0ZWRSb3dzID0gc2VsZWN0aW9uOwogICAgfSwKICAgIC8vIOaJuemHj+WIoOmZpOaVsOaNrgogICAgYXN5bmMgYmF0Y2hEZWxldGUoKSB7CiAgICAgIGlmICghdGhpcy5kZWxlY3RlZFJvd3MubGVuZ3RoKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZShg5pyq6YCJ5Lit5Lu75L2V5pWw5o2uYCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHRoaXMuJHN3YWxDb25maXJtKHsKICAgICAgICB0aXRsZTogJ+WIoOmZpOS5puexjeS5puexjeaVsOaNricsCiAgICAgICAgdGV4dDogYOWIoOmZpOWQjuS4jeWPr+aBouWkje+8jOaYr+WQpue7p+e7re+8n2AsCiAgICAgICAgaWNvbjogJ3dhcm5pbmcnCiAgICAgIH0pOwogICAgICBpZiAoY29uZmlybWVkKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGxldCBpZHMgPSB0aGlzLmRlbGVjdGVkUm93cy5tYXAoZW50aXR5ID0+IGVudGl0eS5pZCk7CiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoYC9ib29rL2JhdGNoRGVsZXRlYCwgaWRzKTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRzd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAn5Yig6Zmk5o+Q56S6JywKICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1zZywKICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmZldGNoRnJlc2hEYXRhKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0aGlzLiRzd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogJ+mUmeivr+aPkOekuicsCiAgICAgICAgICAgIHRleHQ6IGUsCiAgICAgICAgICAgIGljb246ICdlcnJvcicsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5lcnJvcihg5Lmm57GN5Lmm57GN5L+h5oGv5Yig6Zmk5byC5bi477yaYCwgZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXRRdWVyeUNvbmRpdGlvbigpIHsKICAgICAgdGhpcy5ib29rUXVlcnlEdG8gPSB7fTsKICAgICAgdGhpcy5mZXRjaEZyZXNoRGF0YSgpOwogICAgfSwKICAgIC8vIOS/ruaUueS/oeaBrwogICAgYXN5bmMgdXBkYXRlT3BlcmF0aW9uKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuZGF0YS5jb3ZlciA9IHRoaXMuY292ZXI7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRheGlvcy5wdXQoJy9ib29rL3VwZGF0ZScsIHRoaXMuZGF0YSk7CiAgICAgICAgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAn5Lmm57GN5Lmm57GN5L+h5oGv5L+u5pS5JywKICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubXNnLAogICAgICAgICAgaWNvbjogcmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDAgPyAnc3VjY2VzcycgOiAnZXJyb3InLAogICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgdGltZXI6IDEwMDAKICAgICAgICB9KTsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTsKICAgICAgICAgIHRoaXMuZmV0Y2hGcmVzaERhdGEoKTsKICAgICAgICAgIHRoaXMuY2xlYXJGb3JtRGF0YSgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqTooajljZXml7blh7rplJk6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aPkOS6pOWksei0pe+8jOivt+eojeWQjuWGjeivle+8gScpOwogICAgICB9CiAgICB9LAogICAgLy8g5L+h5oGv5paw5aKeCiAgICBhc3luYyBhZGRPcGVyYXRpb24oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5kYXRhLmNvdmVyID0gdGhpcy5jb3ZlcjsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoJy9ib29rL3NhdmUnLCB0aGlzLmRhdGEpOwogICAgICAgIHRoaXMuJG1lc3NhZ2VbcmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDAgPyAnc3VjY2VzcycgOiAnZXJyb3InXShyZXNwb25zZS5kYXRhLm1zZyk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7CiAgICAgICAgICB0aGlzLmZldGNoRnJlc2hEYXRhKCk7CiAgICAgICAgICB0aGlzLmNsZWFyRm9ybURhdGEoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5o+Q5Lqk6KGo5Y2V5pe25Ye66ZSZOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmj5DkuqTlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEnKTsKICAgICAgfQogICAgfSwKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmRpYWxvZ09wZXJhdGlvbiA9IGZhbHNlOwogICAgfSwKICAgIGNsZWFyRm9ybURhdGEoKSB7CiAgICAgIHRoaXMuZGF0YSA9IHt9OwogICAgICB0aGlzLmNvdmVyID0gbnVsbDsKICAgIH0sCiAgICBhc3luYyBmZXRjaEZyZXNoRGF0YSgpIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IFtdOwogICAgICAgIGxldCBzdGFydFRpbWUgPSBudWxsOwogICAgICAgIGxldCBlbmRUaW1lID0gbnVsbDsKICAgICAgICBpZiAodGhpcy5zZWFyY2hUaW1lICE9IG51bGwgJiYgdGhpcy5zZWFyY2hUaW1lLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgY29uc3QgW3N0YXJ0RGF0ZSwgZW5kRGF0ZV0gPSBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLnNlYXJjaFRpbWUubWFwKGRhdGUgPT4gZGF0ZS50b0lTT1N0cmluZygpKSk7CiAgICAgICAgICBzdGFydFRpbWUgPSBgJHtzdGFydERhdGUuc3BsaXQoJ1QnKVswXX1UMDA6MDA6MDBgOwogICAgICAgICAgZW5kVGltZSA9IGAke2VuZERhdGUuc3BsaXQoJ1QnKVswXX1UMjM6NTk6NTlgOwogICAgICAgIH0KICAgICAgICAvLyDor7fmsYLlj4LmlbAKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBjdXJyZW50OiB0aGlzLmN1cnJlbnRQYWdlLAogICAgICAgICAgc2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLAogICAgICAgICAgZW5kVGltZTogZW5kVGltZSwKICAgICAgICAgIC4uLnRoaXMuYm9va1F1ZXJ5RHRvCiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoJy9ib29rL3F1ZXJ5JywgcGFyYW1zKTsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBkYXRhCiAgICAgICAgfSA9IHJlc3BvbnNlOwogICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5kYXRhOwogICAgICAgIHRoaXMudG90YWxJdGVtcyA9IGRhdGEudG90YWw7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5p+l6K+i5Lmm57GN5Lmm57GN5L+h5oGv5byC5bi4OicsIGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIGFkZCgpIHsKICAgICAgdGhpcy5kaWFsb2dPcGVyYXRpb24gPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZUZpbHRlcigpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgIHRoaXMuZmV0Y2hGcmVzaERhdGEoKTsKICAgIH0sCiAgICBoYW5kbGVGaWx0ZXJDbGVhcigpIHsKICAgICAgdGhpcy5oYW5kbGVGaWx0ZXIoKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgdGhpcy5mZXRjaEZyZXNoRGF0YSgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWw7CiAgICAgIHRoaXMuZmV0Y2hGcmVzaERhdGEoKTsKICAgIH0sCiAgICBtZXNzYWdlUHVzaChyb3cpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIC4uLnJvdwogICAgICB9OwogICAgfSwKICAgIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIHRoaXMuZGlhbG9nT3BlcmF0aW9uID0gdHJ1ZTsKICAgICAgdGhpcy5pc09wZXJhdGlvbiA9IHRydWU7CiAgICAgIHRoaXMuZGF0YSA9IHsKICAgICAgICAuLi5yb3cKICAgICAgfTsKICAgICAgdGhpcy5jb3ZlciA9IHJvdy5jb3ZlcjsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHRoaXMuZGVsZWN0ZWRSb3dzLnB1c2gocm93KTsKICAgICAgdGhpcy5iYXRjaERlbGV0ZSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["data","num","currentPage","cover","pageSize","totalItems","dialogOperation","isOperation","tableData","delectedRows","bookQueryDto","options","bookshelfOptions","searchTime","created","fetchFreshData","fetchCategory","fetchBookshelf","methods","cannel","bookshelfConfig","item","floor","area","frame","handleBookCoverSuccess","res","file","code","$message","error","success","$axios","post","then","handleSelectionChange","selection","batchDelete","length","confirmed","$swalConfirm","title","text","icon","ids","map","entity","id","response","$swal","fire","msg","showConfirmButton","timer","e","console","resetQueryCondition","updateOperation","put","closeDialog","clearFormData","addOperation","startTime","endTime","startDate","endDate","Promise","all","date","toISOString","split","params","current","size","total","add","handleFilter","handleFilterClear","handleSizeChange","val","handleCurrentChange","messagePush","row","handleEdit","handleDelete","push"],"sources":["src/views/admin/BookManage.vue"],"sourcesContent":["<template>\r\n    <el-row style=\"background-color: #FFFFFF;border-radius: 5px;max-width: 100%\">\r\n        <el-row style=\"padding: 10px;\">\r\n            <el-row>\r\n                <el-date-picker style=\"width: 216px;margin-right: 5px;\" @change=\"fetchFreshData\" size=\"small\"\r\n                    v-model=\"searchTime\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"创建开始\"\r\n                    end-placeholder=\"创建结束\">\r\n                </el-date-picker>\r\n                <el-input size=\"small\" style=\"width: 166px;\" v-model=\"bookQueryDto.name\" placeholder=\"书名\" clearable\r\n                    @clear=\"handleFilterClear\">\r\n                    <el-button slot=\"append\" @click=\"handleFilter\" icon=\"el-icon-search\"></el-button>\r\n                </el-input>\r\n                <span style=\"float: right;\" class=\"edit-button\" @click=\"add()\">\r\n                    <i class=\"el-icon-tickets\"></i>\r\n                    新增书籍\r\n                </span>\r\n            </el-row>\r\n        </el-row>\r\n        <el-row style=\"margin: 0 auto;max-width: 1350px;\">\r\n            <el-row :gutter=\"16\" style=\"display: flex; flex-wrap: wrap;\">\r\n                <el-col v-for=\"(book, index) in tableData\" :key=\"index\" :span=\"6\" style=\"padding: 2px;\">\r\n                    <div :style=\"{ backgroundColor: book.isPlanBuy ? 'rgba(255, 206, 69,0.2)' : '', boxShadow: book.isPlanBuy ? '0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.06)' : '' }\"\r\n                        class=\"item-book\">\r\n                        <div\r\n                            style=\"padding: 10px 14px;box-sizing: border-box;display: flex;justify-content: center;align-items: left;\">\r\n                            <div style=\"padding-inline: 10px;height: 180px;\">\r\n                                <div\r\n                                    style=\"color: rgb(51,51,51); font-size: 18px; font-weight: bold; margin-block: 4px;\">\r\n                                    <div class=\"title\">{{ book.name }}</div>\r\n                                </div>\r\n                                <div style=\"margin-block: 6px; font-size: 10px; color: rgb(51,51,51);\">\r\n                                    <div>书籍ID：{{ book.id }}</div>\r\n                                    <div class=\"title\" style=\"margin-block: 8px;\">\r\n                                        <i v-if=\"book.isPlanBuy\" style=\"margin-right: 5px;\" class=\"el-icon-warning\"></i>\r\n                                        <i v-else style=\"margin-right: 5px; color: rgb(253, 199, 50);\"\r\n                                            class=\"el-icon-success\"></i>\r\n                                        <el-tooltip v-if=\"book.isPlanBuy\" class=\"item\" effect=\"dark\" content=\"上架后通知\"\r\n                                            placement=\"bottom-end\">\r\n                                            <span\r\n                                                style=\"text-decoration: underline;text-decoration-style: dashed;\">预售书籍</span>\r\n                                        </el-tooltip>\r\n                                        <span v-else>书籍已上架</span>\r\n                                        <span> - {{ book.categoryName }}</span>\r\n                                    </div>\r\n                                    <div style=\"font-size: 10px;\">\r\n                                        <div class=\"title\">{{ book.publisher }}&nbsp;出版</div>\r\n                                    </div>\r\n                                    <div class=\"title\" style=\"margin-block: 10px;\">\r\n                                        <span style=\"margin-right: 5px;\">作者：{{ book.author }}</span>\r\n                                    </div>\r\n                                    <div class=\"title\" style=\"margin-block: 10px;\">\r\n                                        <span>当前库存&nbsp;{{ book.num }}本</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span @click=\"handleEdit(book)\" class=\"edit-round\">修改</span>\r\n                                        <span @click=\"handleDelete(book)\" style=\"margin-left: 4px;\"\r\n                                            class=\"cannel-button\">删除</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div style=\"display: flex; justify-content: center;padding-block: 5px;\">\r\n                                <img style=\"width: 58px; max-height: 88px; border-radius: 5px;\" :src=\"book.cover\"\r\n                                    alt=\"\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </el-col>\r\n            </el-row>\r\n            <el-pagination style=\"margin: 20px 0;float: right;\" @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[12, 24]\"\r\n                :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"totalItems\"></el-pagination>\r\n        </el-row>\r\n        <el-dialog :show-close=\"false\" :visible.sync=\"dialogOperation\" width=\"60%\">\r\n            <div style=\"padding:0 20px 40px 15px;\">\r\n                <el-row>\r\n                    <el-col :span=\"8\">\r\n                        <div class=\"point\">书籍封面</div>\r\n                        <el-upload class=\"avatar-uploader\" action=\"/api/book-manage-sys-api/v1.0/file/upload\"\r\n                            :show-file-list=\"false\" :on-success=\"handleBookCoverSuccess\">\r\n                            <img v-if=\"cover\" :src=\"cover\" style=\"width: 100px;height: 140px;\">\r\n                            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                        </el-upload>\r\n                        <div style=\"margin-bottom: 8px;\">\r\n                            <div class=\"point\">*书架</div>\r\n                            <el-select v-model=\"data.bookShelfId\" placeholder=\"请选择\">\r\n                                <el-option v-for=\"(item, index) in bookshelfOptions\" :key=\"index\"\r\n                                    :label=\"bookshelfConfig(item)\" :value=\"item.id\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                        <div style=\"margin-bottom: 8px;\">\r\n                            <div class=\"point\">*书籍类别</div>\r\n                            <el-select v-model=\"data.categoryId\" placeholder=\"请选择\">\r\n                                <el-option v-for=\"(item, index) in options\" :key=\"index\" :label=\"item.name\"\r\n                                    :value=\"item.id\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                        <div v-if=\"!isOperation || data.isPlanBuy\">\r\n                            <p>上线只需要设置为未预售即可</p>\r\n                            <div style=\"margin-bottom: 8px;\">\r\n                                <div class=\"point\">*是否为预售书籍(预售才选)</div>\r\n                                <el-switch v-model=\"data.isPlanBuy\" active-color=\"#13ce66\"\r\n                                    inactive-color=\"rgb(245, 245, 245)\">\r\n                                </el-switch>\r\n                            </div>\r\n                            <div style=\"margin-bottom: 8px;\">\r\n                                <div class=\"point\">*计划上架时间(预售才选)</div>\r\n                                <el-date-picker v-model=\"data.planBuyTime\" type=\"date\" placeholder=\"计划上架时间\">\r\n                                </el-date-picker>\r\n                            </div>\r\n                        </div>\r\n                        <div style=\"margin-bottom: 8px;\">\r\n                            <div class=\"point\">馆藏数目</div>\r\n                            <el-input-number size=\"small\" v-model=\"data.num\" :min=\"1\" :max=\"100\"\r\n                                label=\"\"></el-input-number>\r\n                        </div>\r\n                    </el-col>\r\n                    <el-col :span=\"16\">\r\n                        <div style=\"margin-left: 40px;\">\r\n                            <div style=\"margin-bottom: 8px;\">\r\n                                <div class=\"point\">书籍名称</div>\r\n                                <input class=\"dialog-input\" v-model=\"data.name\" placeholder=\"输入\" />\r\n                            </div>\r\n                            <div style=\"margin-bottom: 8px;\">\r\n                                <div class=\"point\">出版商</div>\r\n                                <input class=\"dialog-input\" v-model=\"data.publisher\" placeholder=\"输入\" />\r\n                            </div>\r\n                            <div style=\"margin-bottom: 8px;\">\r\n                                <div class=\"point\">作者</div>\r\n                                <input class=\"dialog-input\" v-model=\"data.author\" placeholder=\"输入\" />\r\n                            </div>\r\n                            <div style=\"margin-bottom: 8px;\">\r\n                                <div class=\"point\">国际标准书号(ISBN)</div>\r\n                                <input class=\"dialog-input\" v-model=\"data.isbn\" placeholder=\"输入\" />\r\n                            </div>\r\n                            <div>\r\n                                <div class=\"point\">书籍简介</div>\r\n                                <el-input type=\"textarea\" :autosize=\"{ minRows: 4, maxRows: 6 }\" placeholder=\"书籍简介\"\r\n                                    v-model=\"data.detail\">\r\n                                </el-input>\r\n                            </div>\r\n                        </div>\r\n                    </el-col>\r\n                </el-row>\r\n\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <span class=\"delete-button\" @click=\"cannel()\">\r\n                    取消操作\r\n                </span>\r\n                <span class=\"edit-button\" v-if=\"!isOperation\" @click=\"addOperation()\">\r\n                    确定新增\r\n                </span>\r\n                <span class=\"edit-button\" v-else @click=\"updateOperation()\">\r\n                    确定修改\r\n                </span>\r\n            </span>\r\n        </el-dialog>\r\n    </el-row>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            data: { num: 1 },\r\n            currentPage: 1,\r\n            cover: null,\r\n            pageSize: 12,\r\n            totalItems: 0,\r\n            dialogOperation: false, // 开关\r\n            isOperation: false, // 开关-标识新增或修改\r\n            tableData: [],\r\n            delectedRows: [],\r\n            bookQueryDto: {}, // 搜索条件\r\n            options: [],\r\n            bookshelfOptions: [],\r\n            searchTime: [],\r\n        };\r\n    },\r\n    created() {\r\n        this.fetchFreshData();\r\n        this.fetchCategory();\r\n        this.fetchBookshelf();\r\n    },\r\n    methods: {\r\n        cannel() {\r\n            this.dialogOperation = false;\r\n            this.isOperation = false;\r\n            this.cover = '';\r\n            this.data = {};\r\n        },\r\n        bookshelfConfig(item) {\r\n            return item.floor + \"-\" + item.area + \"-\" + item.frame;\r\n        },\r\n        handleBookCoverSuccess(res, file) {\r\n            if (res.code !== 200) {\r\n                this.$message.error(`书籍封面上传异常`);\r\n                return;\r\n            }\r\n            this.$message.success(`书籍封面上传成功`);\r\n            this.cover = res.data;\r\n        },\r\n        fetchBookshelf() {\r\n            this.$axios.post('bookshelf/query', {}).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.bookshelfOptions = res.data.data;\r\n                }\r\n            })\r\n        },\r\n        fetchCategory() {\r\n            this.$axios.post('category/query', {}).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.options = res.data.data;\r\n                }\r\n            })\r\n        },\r\n        // 多选框选中\r\n        handleSelectionChange(selection) {\r\n            this.delectedRows = selection;\r\n        },\r\n        // 批量删除数据\r\n        async batchDelete() {\r\n            if (!this.delectedRows.length) {\r\n                this.$message(`未选中任何数据`);\r\n                return;\r\n            }\r\n            const confirmed = await this.$swalConfirm({\r\n                title: '删除书籍书籍数据',\r\n                text: `删除后不可恢复，是否继续？`,\r\n                icon: 'warning',\r\n            });\r\n            if (confirmed) {\r\n                try {\r\n                    let ids = this.delectedRows.map(entity => entity.id);\r\n                    const response = await this.$axios.post(`/book/batchDelete`, ids);\r\n                    if (response.data.code === 200) {\r\n                        this.$swal.fire({\r\n                            title: '删除提示',\r\n                            text: response.data.msg,\r\n                            icon: 'success',\r\n                            showConfirmButton: false,\r\n                            timer: 2000,\r\n                        });\r\n                        this.fetchFreshData();\r\n                        return;\r\n                    }\r\n                } catch (e) {\r\n                    this.$swal.fire({\r\n                        title: '错误提示',\r\n                        text: e,\r\n                        icon: 'error',\r\n                        showConfirmButton: false,\r\n                        timer: 2000,\r\n                    });\r\n                    console.error(`书籍书籍信息删除异常：`, e);\r\n                }\r\n            }\r\n        },\r\n        resetQueryCondition() {\r\n            this.bookQueryDto = {};\r\n            this.fetchFreshData();\r\n        },\r\n        // 修改信息\r\n        async updateOperation() {\r\n            try {\r\n                this.data.cover = this.cover;\r\n                const response = await this.$axios.put('/book/update', this.data);\r\n                this.$swal.fire({\r\n                    title: '书籍书籍信息修改',\r\n                    text: response.data.msg,\r\n                    icon: response.data.code === 200 ? 'success' : 'error',\r\n                    showConfirmButton: false,\r\n                    timer: 1000,\r\n                });\r\n                if (response.data.code === 200) {\r\n                    this.closeDialog();\r\n                    this.fetchFreshData();\r\n                    this.clearFormData();\r\n                }\r\n            } catch (error) {\r\n                console.error('提交表单时出错:', error);\r\n                this.$message.error('提交失败，请稍后再试！');\r\n            }\r\n        },\r\n        // 信息新增\r\n        async addOperation() {\r\n            try {\r\n                this.data.cover = this.cover;\r\n                const response = await this.$axios.post('/book/save', this.data);\r\n                this.$message[response.data.code === 200 ? 'success' : 'error'](response.data.msg);\r\n                if (response.data.code === 200) {\r\n                    this.closeDialog();\r\n                    this.fetchFreshData();\r\n                    this.clearFormData();\r\n                }\r\n            } catch (error) {\r\n                console.error('提交表单时出错:', error);\r\n                this.$message.error('提交失败，请稍后再试！');\r\n            }\r\n        },\r\n        closeDialog() {\r\n            this.dialogOperation = false;\r\n        },\r\n        clearFormData() {\r\n            this.data = {};\r\n            this.cover = null;\r\n        },\r\n        async fetchFreshData() {\r\n            try {\r\n                this.tableData = [];\r\n                let startTime = null;\r\n                let endTime = null;\r\n                if (this.searchTime != null && this.searchTime.length === 2) {\r\n                    const [startDate, endDate] = await Promise.all(this.searchTime.map(date => date.toISOString()));\r\n                    startTime = `${startDate.split('T')[0]}T00:00:00`;\r\n                    endTime = `${endDate.split('T')[0]}T23:59:59`;\r\n                }\r\n                // 请求参数\r\n                const params = {\r\n                    current: this.currentPage,\r\n                    size: this.pageSize,\r\n                    startTime: startTime,\r\n                    endTime: endTime,\r\n                    ...this.bookQueryDto\r\n                };\r\n                const response = await this.$axios.post('/book/query', params);\r\n                const { data } = response;\r\n                this.tableData = data.data;\r\n                this.totalItems = data.total;\r\n            } catch (error) {\r\n                console.error('查询书籍书籍信息异常:', error);\r\n            }\r\n        },\r\n        add() {\r\n            this.dialogOperation = true;\r\n        },\r\n        handleFilter() {\r\n            this.currentPage = 1;\r\n            this.fetchFreshData();\r\n        },\r\n        handleFilterClear() {\r\n            this.handleFilter();\r\n        },\r\n        handleSizeChange(val) {\r\n            this.pageSize = val;\r\n            this.currentPage = 1;\r\n            this.fetchFreshData();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.currentPage = val;\r\n            this.fetchFreshData();\r\n        },\r\n        messagePush(row) {\r\n            this.data = { ...row };\r\n        },\r\n        handleEdit(row) {\r\n            this.dialogOperation = true;\r\n            this.isOperation = true;\r\n            this.data = { ...row };\r\n            this.cover = row.cover;\r\n        },\r\n        handleDelete(row) {\r\n            this.delectedRows.push(row);\r\n            this.batchDelete();\r\n        }\r\n    },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.list-cover {\r\n    width: 50px;\r\n    height: 70px;\r\n    border-radius: 5px;\r\n}\r\n\r\n\r\n\r\n.item-book {\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.item-book:hover {\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.06);\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]}]}